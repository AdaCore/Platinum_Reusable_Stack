project Stack_Dev is

   for Languages use ("Ada");
   for Exec_Dir use ".";
   for Object_Dir use "objs";

   package Compiler is
      for Default_Switches ("ada") use
        ("-gnatwa",    -- enable additional warnings
         "-g",         -- enable debugging info, in case
         "-gnato11",   -- enable overflow checks everywhere, which is also the default
         "-gnata");    -- enable assertions
   end Compiler;

   package Builder is
      for Switches ("ada") use ("-g");
   end Builder;

   type Adoption_Levels is ("None", "Stone", "Bronze", "Silver", "Gold", "Platinum");

   Adoption_Level : Adoption_Levels := external ("Adoption_Level", "Platinum");
     
   --  set main program
   case Adoption_Level is
      when "None" | "Stone" | "Bronze" | "Silver" =>
         for Main use ("demo_aorte.adb");
         
      when "Gold" | "Platinum" =>
         for Main use ("demo_gold.adb");
   end case;

   --  set source dirs 
    --  for Source_Dirs use ("source/mains", "source/" & Adoption_Level);   
   case Adoption_Level is
      when "None" =>
         for Source_Dirs use ("source/mains", "source/Ada");      
      when "Stone" => 
         for Source_Dirs use ("source/mains", "source/Stone");         
      when "Bronze" =>  
         for Source_Dirs use ("source/mains", "source/Bronze");
      when "Silver" =>
         for Source_Dirs use ("source/mains", "source/Silver");
      when "Gold" =>
         for Source_Dirs use ("source/mains", "source/Gold");
      when "Platinum" =>
         for Source_Dirs use ("source/mains", "source/Platinum");
   end case;     
      
   --  set GNATprove mode switch
   Mode_Switch := "";
   case Adoption_Level is
      when "None" =>
         Mode_Switch := "--mode=check";
      
      when "Stone" => 
         Mode_Switch := "--mode=check_all";
         
      when "Bronze" =>  
         Mode_Switch := "--mode=flow";

      when "Silver" | "Gold" | "Platinum" =>
         Mode_Switch := "--mode=all";
   end case;     
   
   --  set prover switches
   package Prove is
      for Proof_Switches ("Ada") use 
        ("--level=4") & Mode_Switch;
   end Prove;  

end Stack_Dev;

